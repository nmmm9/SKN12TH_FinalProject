# ğŸš€ DdalKkak ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

DdalKkak Multi-tenant SaaS ê°œë°œ í™˜ê²½ì„ ë¹ ë¥´ê²Œ ì„¤ì •í•˜ê³  ì‹¤í–‰í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ“‹ ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

### í•„ìˆ˜ ì†Œí”„íŠ¸ì›¨ì–´
- **Node.js**: 18.0.0 ì´ìƒ
- **Python**: 3.11 ì´ìƒ
- **PostgreSQL**: 15 ì´ìƒ
- **Redis**: 7 ì´ìƒ
- **Git**: ìµœì‹  ë²„ì „

### ê¶Œì¥ ì‚¬ì–‘
- **ë©”ëª¨ë¦¬**: 8GB ì´ìƒ
- **ì €ì¥ê³µê°„**: 10GB ì´ìƒ ì—¬ìœ ê³µê°„
- **OS**: Windows 10/11, macOS 12+, Ubuntu 20.04+

---

## âš¡ ë¹ ë¥¸ ì„¤ì¹˜ (ìë™)

### Windows (PowerShell)
```powershell
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-org/ddalkkak.git
cd ddalkkak

# ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
.\scripts\setup.bat
```

### macOS/Linux (Bash)
```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/your-org/ddalkkak.git
cd ddalkkak

# ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
chmod +x scripts/setup.sh
./scripts/setup.sh
```

---

## ğŸ”§ ìˆ˜ë™ ì„¤ì¹˜

### 1ë‹¨ê³„: ì €ì¥ì†Œ í´ë¡ 
```bash
git clone https://github.com/your-org/ddalkkak.git
cd ddalkkak
```

### 2ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • â­ **ì¤‘ìš” ë³€ê²½ì‚¬í•­**
```bash
# í™˜ê²½ ë³€ìˆ˜ íŒŒì¼ ë³µì‚¬
cp .env.example .env

# í™˜ê²½ ë³€ìˆ˜ í¸ì§‘ (OAuth ì„¤ì • í•„ìš”)
nano .env  # ë˜ëŠ” ì›í•˜ëŠ” ì—ë””í„° ì‚¬ìš©
```

**ğŸš¨ Multi-tenant ì „í™˜ìœ¼ë¡œ ì„¤ì • ë°©ì‹ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤:**
- âŒ **ì´ì „**: ê°œì¸ í† í°ì„ .envì— ì§ì ‘ ì…ë ¥
- âœ… **í˜„ì¬**: OAuth ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± í›„ Client ID/Secret ì„¤ì •

**ğŸ“– ìì„¸í•œ ì„¤ì • ë°©ë²•ì€ `OAuth_ì„¤ì •_ê°€ì´ë“œ.md` ì°¸ì¡°**

### 3ë‹¨ê³„: ì˜ì¡´ì„± ì„¤ì¹˜
```bash
# ë£¨íŠ¸ í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ëª¨ë“  í•˜ìœ„ í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
npm run install:all
```

### 4ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
# PostgreSQL ë° Redis ì„œë¹„ìŠ¤ ì‹œì‘
# Windows (ì„œë¹„ìŠ¤ ê´€ë¦¬ìì—ì„œ ì‹œì‘)
# macOS: brew services start postgresql redis
# Ubuntu: sudo systemctl start postgresql redis-server

# Prisma ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ (Multi-tenant ìŠ¤í‚¤ë§ˆ ì ìš©)
cd backend
npx prisma migrate dev --name init-multitenant
npx prisma generate
cd ..
```

### 5ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰ ì „ í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
npm run dev:backend

# í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šìœ¼ë©´ ì¹œì ˆí•œ ê°€ì´ë“œ ë©”ì‹œì§€ ì¶œë ¥
# ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ë©´ ì„œë²„ê°€ ì •ìƒ ì‹œì‘ë©ë‹ˆë‹¤
```

### 6ë‹¨ê³„: ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ë™ì‹œ ì‹¤í–‰
npm run dev

# ë˜ëŠ” ê°œë³„ ì‹¤í–‰
npm run dev:backend    # ë°±ì—”ë“œ ì„œë²„ (í¬íŠ¸ 3500)
npm run dev:ai         # AI ì—”ì§„ (í¬íŠ¸ 8001)
npm run dev:frontend   # í”„ë¡ íŠ¸ì—”ë“œ (í¬íŠ¸ 3001)
```

---

## ğŸ”‘ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ê°€ì´ë“œ (Multi-tenant)

### âš ï¸ ì¤‘ìš”: OAuth ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • í•„ìš”

ì´ì œ **ê°œì¸ í† í° ëŒ€ì‹  OAuth ì• í”Œë¦¬ì¼€ì´ì…˜**ì„ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤:

```env
# âŒ ì´ì „ ë°©ì‹ (ë” ì´ìƒ ì‚¬ìš© ì•ˆí•¨)
SLACK_BOT_TOKEN=xoxb-ê°œì¸í† í°
NOTION_TOKEN=ntn_ê°œì¸í† í°

# âœ… ìƒˆë¡œìš´ ë°©ì‹ (OAuth App)
SLACK_CLIENT_ID=1234567890.1234567890
SLACK_CLIENT_SECRET=ì‹¤ì œ_í´ë¼ì´ì–¸íŠ¸_ì‹œí¬ë¦¿
NOTION_CLIENT_ID=ì‹¤ì œ_ë…¸ì…˜_í´ë¼ì´ì–¸íŠ¸_ID
NOTION_CLIENT_SECRET=secret_ì‹¤ì œ_ë…¸ì…˜_ì‹œí¬ë¦¿
```

### ğŸ“‹ OAuth ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„± ìˆœì„œ

1. **Slack OAuth App ìƒì„±**
   - ìœ„ì¹˜: https://api.slack.com/apps
   - Redirect URL: `http://localhost:3500/auth/slack/callback`

2. **Notion OAuth App ìƒì„±**
   - ìœ„ì¹˜: https://developers.notion.com/
   - Redirect URL: `http://localhost:3500/auth/notion/callback`

3. **Jira OAuth App ìƒì„±**
   - ìœ„ì¹˜: https://developer.atlassian.com/console/myapps/
   - Redirect URL: `http://localhost:3500/auth/jira/callback`

4. **Google OAuth App ìƒì„±**
   - ìœ„ì¹˜: https://console.cloud.google.com/
   - Redirect URL: `http://localhost:3500/auth/google/callback`

**ğŸ“– ë‹¨ê³„ë³„ ìƒì„¸ ê°€ì´ë“œ: `OAuth_ì„¤ì •_ê°€ì´ë“œ.md` íŒŒì¼ ì°¸ì¡°**

### ğŸ”’ í•„ìˆ˜ ë³´ì•ˆ ì„¤ì •

```env
# ê°•ë ¥í•œ ì•”í˜¸í™” í‚¤ ìƒì„± (32ë°”ì´íŠ¸ hex)
ENCRYPTION_KEY=$(openssl rand -hex 32)

# JWT ì‹œí¬ë¦¿ ê°•í™”
JWT_SECRET=your_super_secret_jwt_key_production_12345

# ì•± URL ì„¤ì •
APP_URL=http://localhost:3500  # ê°œë°œìš©
# APP_URL=https://yourdomain.com  # í”„ë¡œë•ì…˜ìš©
```

---

## âœ… ì„¤ì¹˜ í™•ì¸

### í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
ì„œë²„ ì‹œì‘ ì‹œ ìë™ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê²€ì¦í•©ë‹ˆë‹¤:

```bash
npm run dev:backend

# ì¶œë ¥ ì˜ˆì‹œ:
ğŸ” í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ ê²°ê³¼

âœ… ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!

ğŸ”— OAuth ì½œë°± URL:
  âœ… slack: http://localhost:3500/auth/slack/callback
  âœ… notion: http://localhost:3500/auth/notion/callback
  âœ… jira: http://localhost:3500/auth/jira/callback
  âœ… google: http://localhost:3500/auth/google/callback
```

### ì„œë²„ ìƒíƒœ í™•ì¸
```bash
# ë°±ì—”ë“œ ì„œë²„ í—¬ìŠ¤ì²´í¬
curl http://localhost:3500/health

# AI ì—”ì§„ í—¬ìŠ¤ì²´í¬
curl http://localhost:8001/health

# ì‘ë‹µ ì˜ˆì‹œ
{
  "status": "healthy",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "uptime": 123.45
}
```

### Multi-tenant ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# OAuth ì—°ë™ URL ìƒì„± í…ŒìŠ¤íŠ¸
curl http://localhost:3500/auth/notion/url

# ì‘ë‹µ ì˜ˆì‹œ:
{
  "authUrl": "https://api.notion.com/v1/oauth/authorize?client_id=...",
  "state": "tenant123:user456:1234567890"
}
```

---

## ğŸ“± Slack ì•± í…ŒìŠ¤íŠ¸ (Multi-tenant)

### 1. Slack OAuth App ì„¤ì¹˜
1. [Slack API ì½˜ì†”](https://api.slack.com/apps)ì—ì„œ ì•± ì„¤ì •
2. **OAuth & Permissions** â†’ **Install to Workspace**
3. ê¶Œí•œ ìŠ¹ì¸ í›„ ì•± ì„¤ì¹˜ ì™„ë£Œ

### 2. í…Œë„ŒíŠ¸ë³„ ì—°ë™ í…ŒìŠ¤íŠ¸
ê° Slack ì›Œí¬ìŠ¤í˜ì´ìŠ¤ë§ˆë‹¤ ë…ë¦½ì ìœ¼ë¡œ ì‘ë™:

```
# íšŒì‚¬ A Slackì—ì„œ
/ddal-connect notion  â†’ íšŒì‚¬ A Notion ì—°ë™

# íšŒì‚¬ B Slackì—ì„œ  
/ddal-connect notion  â†’ íšŒì‚¬ B Notion ì—°ë™ (ì™„ì „ ê²©ë¦¬)
```

### 3. ê¸°ë³¸ ëª…ë ¹ì–´ í…ŒìŠ¤íŠ¸
```
# ë„ì›€ë§ í™•ì¸
/ddal-help

# íšŒì˜ ì‹œì‘ (í…Œë„ŒíŠ¸ë³„ ê²©ë¦¬)
/ddal-meeting start "í”„ë¡œì íŠ¸ ê¸°íš íšŒì˜"

# ì„œë¹„ìŠ¤ ì—°ë™ ìƒíƒœ í™•ì¸
/ddal-status

# ë…¸ì…˜ ì—°ë™
/ddal-connect notion
```

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### Multi-tenant ê´€ë ¨ ë¬¸ì œ

#### 1. OAuth ì„¤ì • ì˜¤ë¥˜
```bash
# í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ìœ¼ë¡œ ë¬¸ì œ í™•ì¸
npm run dev:backend

# ì¼ë°˜ì ì¸ ì˜¤ë¥˜:
âŒ SLACK_CLIENT_ID: ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´ í•„ìš” (í˜„ì¬: YOUR-SLACK-CLIENT-ID-HERE)
âŒ ENCRYPTION_KEY: í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŒ (64ì hex í•„ìš”)
```

#### 2. ì½œë°± URL ë¶ˆì¼ì¹˜
```
OAuth Error: redirect_uri_mismatch

í•´ê²°: OAuth ì•± ì„¤ì •ì—ì„œ Redirect URL í™•ì¸
- ì„¤ì •ê°’: http://localhost:3500/auth/slack/callback
- .env APP_URL: http://localhost:3500
```

#### 3. í…Œë„ŒíŠ¸ ê²©ë¦¬ í™•ì¸
```bash
# ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ í…Œë„ŒíŠ¸ í™•ì¸
psql -U postgres -d ddalkkak
SELECT * FROM tenants;
SELECT * FROM users WHERE tenant_id = 'specific-tenant-id';
```

### ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

#### ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨
```bash
# Prisma ìºì‹œ í´ë¦¬ì–´
cd backend
npx prisma generate --force
npx prisma migrate reset --force
npx prisma migrate dev --name init-multitenant
```

#### í¬íŠ¸ ì¶©ëŒ ì˜¤ë¥˜
```bash
# í¬íŠ¸ ì‚¬ìš© í”„ë¡œì„¸ìŠ¤ í™•ì¸
lsof -i :3500  # macOS/Linux
netstat -ano | findstr :3500  # Windows

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ í›„ ì¬ì‹œì‘
```

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. OAuth ì„¤ì • ì™„ë£Œ í›„
- **`OAuth_ì„¤ì •_ê°€ì´ë“œ.md`** ìœ¼ë¡œ ëª¨ë“  ì„œë¹„ìŠ¤ ì—°ë™ ì™„ë£Œ
- ê° ì„œë¹„ìŠ¤ë³„ í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ì—°ë™ í™•ì¸

### 2. Multi-tenant í…ŒìŠ¤íŠ¸
- ì—¬ëŸ¬ Slack ì›Œí¬ìŠ¤í˜ì´ìŠ¤ì—ì„œ ë™ì‹œ ì‚¬ìš© í…ŒìŠ¤íŠ¸
- ë°ì´í„° ê²©ë¦¬ í™•ì¸ (íšŒì‚¬ë³„ ë…ë¦½ì„±)

### 3. í”„ë¡œë•ì…˜ ë°°í¬ ì¤€ë¹„
- HTTPS ë„ë©”ì¸ ì„¤ì •
- OAuth ì•±ì˜ Redirect URLì„ í”„ë¡œë•ì…˜ URLë¡œ ë³€ê²½
- í™˜ê²½ ë³€ìˆ˜ë¥¼ í”„ë¡œë•ì…˜ìš©ìœ¼ë¡œ ì—…ë°ì´íŠ¸

---

## ğŸ“ ì£¼ìš” íŒŒì¼ ìœ„ì¹˜

```
C:\Users\Playdata\Desktop\TtalKkak\
â”œâ”€â”€ ğŸ“„ .env                          # ğŸ”¥ í™˜ê²½ ë³€ìˆ˜ (OAuth ì„¤ì • í•„ìš”)
â”œâ”€â”€ ğŸ“„ .env.example                  # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”œâ”€â”€ ğŸ“„ OAuth_ì„¤ì •_ê°€ì´ë“œ.md           # OAuth ì•± ìƒì„± ê°€ì´ë“œ
â”œâ”€â”€ ğŸ“ backend/
â”‚   â”œâ”€â”€ ğŸ“„ prisma/schema.prisma      # Multi-tenant ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.ts              # ë©”ì¸ ì„œë²„ (í™˜ê²½ ë³€ìˆ˜ ê²€ì¦ í¬í•¨)
â”‚   â”‚   â”œâ”€â”€ ğŸ“ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ tenant.ts         # Multi-tenant ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ auth.ts           # ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
â”‚   â”‚   â”œâ”€â”€ ğŸ“ services/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ oauth.ts          # OAuth ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ğŸ“ types/
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ tenant.ts         # Multi-tenant íƒ€ì… ì •ì˜
â”‚   â”‚   â””â”€â”€ ğŸ“ utils/
â”‚   â”‚       â””â”€â”€ ğŸ“„ envValidator.ts   # í™˜ê²½ ë³€ìˆ˜ ê²€ì¦
â””â”€â”€ ğŸ“ ai-engine/
    â””â”€â”€ ğŸ“„ main.py                   # AI ì„œë²„ (Multi-tenant ì§€ì›)
```

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ë©´:

- ğŸ“– **OAuth ì„¤ì •**: `OAuth_ì„¤ì •_ê°€ì´ë“œ.md` ì°¸ì¡°
- ğŸ”§ **í™˜ê²½ ë³€ìˆ˜**: `.env.example` íŒŒì¼ ì°¸ì¡°
- ğŸ“ **GitHub Issues**: [ì´ìŠˆ ë“±ë¡](https://github.com/your-org/ddalkkak/issues)
- ğŸ“§ **ì´ë©”ì¼**: support@ddalkkak.com

---

## ğŸ†• Multi-tenant ì£¼ìš” ë³€ê²½ì‚¬í•­ ìš”ì•½

| í•­ëª© | ì´ì „ (Single-tenant) | í˜„ì¬ (Multi-tenant) |
|------|---------------------|-------------------|
| **í† í° ê´€ë¦¬** | .envì— ê°œì¸ í† í° | OAuth App + ì•”í˜¸í™” ì €ì¥ |
| **ì‚¬ìš©ì ê²©ë¦¬** | ë‹¨ì¼ ê³„ì • ê³µìœ  | íšŒì‚¬ë³„ ì™„ì „ ê²©ë¦¬ |
| **ì„¤ì • ë°©ë²•** | ê°œë°œìê°€ í† í° ì§ì ‘ ì…ë ¥ | OAuth App ìƒì„± + Client ID/Secret |
| **ë³´ì•ˆ ìˆ˜ì¤€** | ë‚®ìŒ | ë†’ìŒ (ì•”í˜¸í™” + ê²©ë¦¬) |
| **í™•ì¥ì„±** | ì œí•œì  | ë¬´ì œí•œ íšŒì‚¬ ì§€ì› |

**ğŸ‰ ì´ì œ ì§„ì§œ ìƒìš© SaaS ì„œë¹„ìŠ¤ë¡œ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**